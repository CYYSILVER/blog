<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>CSS动画-auto属性的过渡 - Yinyi的博客</title><meta name="google-site-verification" content="EHyjlYTXNRLmQnM0On_4bF_-01shKgQOE_kZH48zpvo"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="通常，你想要通过css transition来过渡属性，然后使用了下面代码transition: height 0.5s linear 然后又使用了 height: auto来自适应高度height: 0 -&amp;gt; height: auto 然后发现动画就像没发生一样，直接就在0和auto两个状态之间直接切换 你可能会认为出现了什么bug，或者代码写错了，其实不然"><meta name="keywords" content="css,js,animation"><meta property="og:type" content="article"><meta property="og:title" content="CSS动画-auto属性的过渡"><meta property="og:url" content="http://cyysilver.github.io/blog/articles/2019-07-14-CSS动画-auto属性的过渡.html"><meta property="og:site_name" content="Yinyi的博客"><meta property="og:description" content="通常，你想要通过css transition来过渡属性，然后使用了下面代码transition: height 0.5s linear 然后又使用了 height: auto来自适应高度height: 0 -&amp;gt; height: auto 然后发现动画就像没发生一样，直接就在0和auto两个状态之间直接切换 你可能会认为出现了什么bug，或者代码写错了，其实不然"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://cyysilver.github.io/blog/blog/articles/2019-07-14-CSS动画-auto属性的过渡/thumb.png"><meta property="og:updated_time" content="2019-07-16T14:12:41.252Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="CSS动画-auto属性的过渡"><meta name="twitter:description" content="通常，你想要通过css transition来过渡属性，然后使用了下面代码transition: height 0.5s linear 然后又使用了 height: auto来自适应高度height: 0 -&amp;gt; height: auto 然后发现动画就像没发生一样，直接就在0和auto两个状态之间直接切换 你可能会认为出现了什么bug，或者代码写错了，其实不然"><meta name="twitter:image" content="http://cyysilver.github.io/blog/blog/articles/2019-07-14-CSS动画-auto属性的过渡/thumb.png"><link rel="icon" href="/blog/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.10.0-11/css/all.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/darcula.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="/blog/css/back-to-top.css"><link rel="stylesheet" href="/blog/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/blog/css/style.css"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"> <a class="navbar-item navbar-logo" href="/blog/"><img src="/blog/images/logo.svg" alt="CSS动画-auto属性的过渡" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"> <a class="navbar-item" href="/blog/">主页</a> <a class="navbar-item" href="/blog/archives">归档</a> <a class="navbar-item" href="/blog/categories">分类</a> <a class="navbar-item" href="/blog/tags">标签</a> <a class="navbar-item" href="/blog/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" title="Download Theme on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-9-desktop is-9-widescreen has-order-1 column-main"><div class="card"><div class="card-image"> <span class="image is-7by1"><img class="thumbnail" src="/blog/articles/2019-07-14-CSS动画-auto属性的过渡/thumb.png" alt="CSS动画-auto属性的过渡"></span></div><div class="card-content article"><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"> <time class="level-item has-text-grey" datetime="2019-07-14T07:20:24.000Z">2019-07-14</time><div class="level-item"> <a class="has-link-grey -link" href="/blog/categories/css动画/">css动画</a></div> <span class="level-item has-text-grey">13 分钟 读完 (大约 1910 个字)</span></div></div><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"> CSS动画-auto属性的过渡</h1><div class="content"><p>通常，你想要通过<code>css transition</code>来过渡属性，然后使用了下面代码<code>transition: height 0.5s linear</code></p><p>然后又使用了 <code>height: auto</code>来自适应高度<code>height: 0</code> -&gt; <code>height: auto</code></p><p>然后发现动画就像没发生一样，直接就在0和auto两个状态之间直接切换</p><p>你可能会认为出现了什么bug，或者代码写错了，其实不然</p><a id="more"></a><p>你可能发生下图所示的情况</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/auto-problem.gif" alt="auto-problem"></p><blockquote><p>在这篇文章中，都使用高度进行说明，这张图里的宽度与高度是一个道理</p></blockquote><p>这个问题目前还不能简单通过css完全解决</p><p>下面是我分享的4个解决方案</p><blockquote><p>本文章部分资料以及Code Pen代码引用于 <a href="https://css-tricks.com/using-css-transitions-auto-dimensions/" target="_blank" rel="noopener">css-tricks.com</a>， 里面有很多关于css的技巧，值得学习</p></blockquote><h1 id="这是浏览器bug"><a href="#这是浏览器bug" class="headerlink" title="这是浏览器bug?"></a>这是浏览器bug?</h1><p>查阅Mozilla Developer Network docs， <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions#Specifications" target="_blank" rel="noopener">auto 属性值被排除在transition规范之外</a>。 这样做的原因是因为，如果transition一个元素的高度到auto，浏览器将会进行页面重排(reflow)，重排页面会计算其他元素的位置，并且在每一个动画帧都会进行这样的操作，这意味着将花费巨大的开销。</p><p>虽然设置height: auto达到不了我们想要的效果，但是可以通过其他方法实现，下面介绍4种方式</p><ol><li>使用max-height</li><li>使用transform: scaleY()</li><li>使用Javascript</li><li>使用Flex容器</li></ol><h1 id="解决方案-1-使用-max-height"><a href="#解决方案-1-使用-max-height" class="headerlink" title="解决方案 1: 使用 max-height"></a>解决方案 1: 使用 max-height</h1><p>这个方法可能是最容易搜索到的方法，但是不太理想，不过在一些情况下，还是值得使用</p><p>具体方法大概如下：</p><ul><li>​ 设置 transition: max-height 0.3s ease-out</li><li>​ max-height: 0</li><li>​ 过渡到一个该容器能达到的最大值，比如 1000px</li><li>​ max-height: 1000px</li></ul><p>这里的max-height必须保证大于容器auto的height，不然就会出现内容显示不全的情况</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/GIF-1563106416380.gif" alt="GIF"></p><h2 id="Code-Pen演示"><a href="#Code-Pen演示" class="headerlink" title="Code Pen演示"></a>Code Pen演示</h2><blockquote><p>在以下的code pen演示中都使用的SCSS，如果需查看CSS，请点击下面的View Compiled按钮</p></blockquote><p>主要注意.section这部分</p><figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.section</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">overflow</span>:hidden;</span><br><span class="line">  <span class="hljs-attribute">transition</span>:max-height <span class="hljs-number">0.3s</span> ease-out; <span class="hljs-comment">/* 设置max-height的transition属性 */</span></span><br><span class="line">  <span class="hljs-attribute">height</span>:auto;</span><br><span class="line">  <span class="hljs-attribute">max-height</span>:<span class="hljs-number">600px</span>; <span class="hljs-comment">/* 这里仍然需要硬编码 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-selector-class">.section</span><span class="hljs-selector-class">.collapsed</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">max-height</span>:<span class="hljs-number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe height="600" style="width:100%" scrolling="no" title="Smooth Collapsing div with max-height" src="//codepen.io/CYSILVER/embed/dBERrY/?height=265&theme-id=0&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/CYSILVER/pen/dBERrY/" target="_blank" rel="noopener">Smooth Collapsing div with max-height</a> by Chen Yinyi (<a href="https://codepen.io/CYSILVER" target="_blank" rel="noopener">@CYSILVER</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><p>可能你也发现了，这里的max-height也是硬编码，大多数情况下也不好确定容器的最大内容高度。</p><p>其次，设置的transition的时间和变换函数和实际展示出来的并不一致</p><p>打个比方</p><ul><li>​ 内容的实际最高宽度为100px</li><li>​ 你设置了:<ul><li>​ max-height: 0 -&gt; max-height: 1000px</li><li>​ transition: max-height 10s linear;</li></ul></li><li>​ 那么这里的10s的transition显示在浏览器上就只有1s，因为1s后max-height: 100px已经达到容器最大高度，后面的max-height的变化不会体现出来</li></ul><p>​</p><h1 id="解决方案-2-transform-scaleY"><a href="#解决方案-2-transform-scaleY" class="headerlink" title="解决方案 2: transform: scaleY()"></a>解决方案 2: transform: scaleY()</h1><p>该方法不会触发页面重排(reflow)</p><p>设置方法很简单</p><p>设置 transform: scaleY(0) 到 transform: scaleY(1) 即可完成高度的缩放</p><p>该方法不会触发重排，所以元素位置不会改变，同时元素的内容会产生挤压的形变效果</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/GIF-1563106477677.gif" alt="GIF"></p><h2 id="Code-Pen-演示"><a href="#Code-Pen-演示" class="headerlink" title="Code Pen 演示"></a>Code Pen 演示</h2><figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.section</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">overflow</span>:hidden;</span><br><span class="line">  <span class="hljs-attribute">transition</span>:transform <span class="hljs-number">0.3s</span> ease-out; <span class="hljs-comment">/* 设置transform的transition属性 */</span></span><br><span class="line">  <span class="hljs-attribute">height</span>:auto;</span><br><span class="line">  <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">scaleY</span>(1); <span class="hljs-comment">/* 可以不用显示声明，但最好的做法是在这里声明一下 */</span></span><br><span class="line">  <span class="hljs-attribute">transform-origin</span>:top; <span class="hljs-comment">/* 设置transform的起始点，不然就会从中间开始缩放 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-selector-class">.section</span><span class="hljs-selector-class">.collapsed</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">transform</span>:<span class="hljs-built_in">scaleY</span>(0); <span class="hljs-comment">/* 设置为0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe height="600" style="width:100%" scrolling="no" title="Smooth Collapsing div with scaleY()" src="//codepen.io/CYSILVER/embed/jjoYOp/?height=265&theme-id=0&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/CYSILVER/pen/jjoYOp/" target="_blank" rel="noopener">Smooth Collapsing div with scaleY()</a> by Chen Yinyi (<a href="https://codepen.io/CYSILVER" target="_blank" rel="noopener">@CYSILVER</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h2 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h2><p>该方法普遍不适用</p><p>产生的形变效果大部分时候不是我们想要的，也不够没关</p><p>不会产生页面重排，折叠后的位置留空，大部分时候不是我们想要的情况</p><h1 id="解决方案-3-Javascript（推荐）"><a href="#解决方案-3-Javascript（推荐）" class="headerlink" title="解决方案 3: Javascript（推荐）"></a>解决方案 3: Javascript（推荐）</h1><p>该方法使用js获取到内容的最大高度，然后就能使用固定的高度进行transition了</p><p>基本思路是使用，获取到元素的高度</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.scrollHeight</span><br></pre></td></tr></table></figure><p>然后设置</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.style.height = scrollHeight</span><br></pre></td></tr></table></figure><p>点击后设置</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.style.height = <span class="hljs-number">0</span></span><br></pre></td></tr></table></figure><p>这样就能实现css的transition效果，并且移除了硬编码，更加灵活，适用于任意高度的容器</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/GIF-1563107549531.gif" alt="GIF"></p><h2 id="Code-Pen-演示-1"><a href="#Code-Pen-演示-1" class="headerlink" title="Code Pen 演示"></a>Code Pen 演示</h2><p>要点在这两部分</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> sectionHeight = element.scrollHeight; <span class="hljs-comment">// 获取到内容的高度</span></span><br><span class="line">element.style.height = sectionHeight + <span class="hljs-string">'px'</span>; <span class="hljs-comment">// 设置Height</span></span><br></pre></td></tr></table></figure><p>关于scrollHeight</p><blockquote><p><strong>Element.scrollHeight</strong> 这个只读属性是一个元素内容高度的度量，包括由于溢出导致的视图中不可见内容。</p></blockquote><p>我这里放个图大家就知道了</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/scrollHeight.png" alt="scrollHeight"></p><iframe height="600" style="width:100%" scrolling="no" title="Smooth Collapsing div with Javascript" src="//codepen.io/CYSILVER/embed/gNJorx/?height=265&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/CYSILVER/pen/gNJorx/" target="_blank" rel="noopener">Smooth Collapsing div with Javascript</a> by Chen Yinyi (<a href="https://codepen.io/CYSILVER" target="_blank" rel="noopener">@CYSILVER</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><p>这里使用到了<code>requestAnimationFrame()</code>，关于这个我会在之后的博文讲解。</p><p>下面是我写的另外一种做法，比这个要直观一点</p><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'.dropdown-nav__title'</span>).forEach(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    item.addEventListener(</span><br><span class="line">      <span class="hljs-string">'click'</span>,</span><br><span class="line">      (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;</span><br><span class="line">        <span class="hljs-comment">// 利用闭包存储状态</span></span><br><span class="line">        <span class="hljs-keyword">let</span> opened = <span class="hljs-literal">false</span></span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;</span><br><span class="line">          <span class="hljs-keyword">let</span> scrollHeight = event.target.nextElementSibling.scrollHeight</span><br><span class="line">          requestAnimationFrame(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="hljs-comment">// 切换height</span></span><br><span class="line">            event.target.nextElementSibling.style.height = opened</span><br><span class="line">              ? <span class="hljs-string">'0'</span></span><br><span class="line">              : <span class="hljs-string">`<span class="hljs-subst">$&#123;scrollHeight&#125;</span>px`</span></span><br><span class="line">            opened = !opened</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)() <span class="hljs-comment">//立即执行函数，返回内部的function</span></span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><iframe height="600" style="width:100%" scrolling="no" title="dropDown-menu" src="//codepen.io/CYSILVER/embed/agrEEd/?height=265&theme-id=0&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/CYSILVER/pen/agrEEd/" target="_blank" rel="noopener">dropDown-menu</a> by Chen Yinyi (<a href="https://codepen.io/CYSILVER" target="_blank" rel="noopener">@CYSILVER</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h2 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h2><p>同样的，这里没有避免掉页面重排的问题</p><p>不过在某些特定的情况下，可以通过使用绝对定位来避免页面重排，比如导航栏的下拉菜单如果需要设置动画，就不需要重排页面。</p><h1 id="解决方案-4-FlexBox-额外方式"><a href="#解决方案-4-FlexBox-额外方式" class="headerlink" title="解决方案 4: FlexBox (额外方式)"></a>解决方案 4: FlexBox (额外方式)</h1><p>之所以称之为额外方式，是因为从技术上来说该方式没有达到预期的效果，不过却是另外一种不错的方法</p><p>如果你还不够了解flexbox 和 flex-grow两个属性，推荐阅读</p><p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">阮一峰的Flex 布局教程</a></p><p><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="noopener">A Complete Guide to FlexBox (英文)</a></p><p>这里的话主要就是用到的flex这个属性了(实质上为flex-grow)</p><p><img src="/blog/articles/2019-07-14-CSS%E5%8A%A8%E7%94%BB-auto%E5%B1%9E%E6%80%A7%E7%9A%84%E8%BF%87%E6%B8%A1/GIF-1563114031722.gif" alt="GIF"></p><h2 id="Code-Pen-演示-2"><a href="#Code-Pen-演示-2" class="headerlink" title="Code Pen 演示"></a>Code Pen 演示</h2><figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-class">.section</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">overflow</span>:hidden;	<span class="hljs-comment">/* 注意这里是关键 */</span></span><br><span class="line">  <span class="hljs-attribute">transition</span>:flex <span class="hljs-number">0.3s</span> ease-out; <span class="hljs-comment">/* 设置flex的transition */</span></span><br><span class="line">  <span class="hljs-attribute">height</span>:auto;</span><br><span class="line">  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>;	<span class="hljs-comment">/* 设置flex为1，或者1以上，即容器能够自动伸长，关于这个值的作用请见flexbox的教程 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-selector-class">.section</span><span class="hljs-selector-class">.collapsed</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">flex</span>: <span class="hljs-number">0</span>;	<span class="hljs-comment">/* 设置flex为0，即容器不会自动伸长 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>请注意上面的</p><figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-tag">overflow</span>: <span class="hljs-selector-tag">hidden</span>;</span><br></pre></td></tr></table></figure><p>这句话是关键，可替换为</p><figure class="highlight css hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-tag">min-height</span>: 0;</span><br></pre></td></tr></table></figure><p>因为默认情况下，元素不会缩短至小于内容框尺寸，若想改变这一状况，请设置元素的<code>min-width</code>与 <code>min-height</code>属性。同样的设置<code>overflow: hidden</code>也可达到相同效果</p><iframe height="600" style="width:100%" scrolling="no" title="Smooth Collapsing div with Flexbox" src="//codepen.io/CYSILVER/embed/wLbyNa/?height=265&theme-id=0&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen="true">See the Pen <a href="https://codepen.io/CYSILVER/pen/wLbyNa/" target="_blank" rel="noopener">Smooth Collapsing div with Flexbox</a> by Chen Yinyi (<a href="https://codepen.io/CYSILVER" target="_blank" rel="noopener">@CYSILVER</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><p>这又是另一种效果，所以说是一种额外的解决方法。</p><p>不过这种方法利用了flexbox，更加灵活</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这四种方式各有优缺点，没有优劣，不过个人还是比较喜欢用js的方式，不过至于到底该用哪个，根据你的需求和情况而定。</p></div><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"> <span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/blog/tags/animation/">animation</a>, <a class="has-link-grey -link" href="/blog/tags/css/">css</a>, <a class="has-link-grey -link" href="/blog/tags/js/">js</a></div></div></div></div></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span> <span>支付宝</span><div class="qrcode"><img src="https://img.moegirl.org/common/7/71/%E6%BB%91%E7%A8%BD%E8%A1%A8%E6%83%85.jpg" alt="支付宝"></div></a></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-start"><a class="level level-item has-link-grey article-nav-prev" href="/blog/articles/2019-07-16-webpack-tutorial-01.html"><i class="level-item fas fa-chevron-left"></i> <span class="level-item">webpack入门教程</span></a></div><div class="level-end"> <a class="level level-item has-link-grey article-nav-next" href="/blog/articles/2019-07-05-hexo博客优化-gulp压缩-提高访问速度.html"><span class="level-item">使用gulp优化hexo博客，对资源进行压缩</span><i class="level-item fas fa-chevron-right"></i></a></div></div></div></div><div class="column is-4-tablet is-3-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content" id="issueAvatar"><nav class="level"><div class="level-item has-text-centered"><div><figure class="image is-128x128 has-mb-6"> <img class="is-rounded" src="/blog/images/avatar.png" alt="Chen Yinyi"></figure><p class="is-size-4 is-block"> Chen Yinyi</p><p class="is-size-6 is-block"> When the wind is rising, it is time to struggle for life.</p><p class="is-size-6 is-flex is-flex-center has-text-grey"><i class="fas fa-map-marker-alt has-mr-7"></i> <span>Sichuan</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 文章</p><p class="title has-text-weight-normal"> 8</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 分类</p><p class="title has-text-weight-normal"> 8</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 标签</p><p class="title has-text-weight-normal"> 12</p></div></div></nav><div class="level"> <a class="level-item button is-link is-rounded" href="http://www.github.com/cyysilver" target="_blank">关注我</a></div><div class="level is-mobile"><a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/cyysilver"><i class="fab fa-github"></i></a><a class="level-item button is-white is-marginless" target="_blank" title="我的b站账号" href="https://space.bilibili.com/5419011"><i class="fa fa-play"></i></a><a class="level-item button is-white is-marginless" target="_blank" title="QQ 992290851" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=992290851&amp;website=www.oicqzone.com"><i class="fab fa-qq"></i></a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 链接</h3><ul class="menu-list"><li> <a class="level is-mobile" href="https://hexo.io" target="_blank"><span class="level-left"><span class="level-item">Hexo</span></span> <span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li> <a class="level is-mobile" href="https://github.com/CYYSILVER" target="_blank"><span class="level-left"><span class="level-item">Github</span></span> <span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 分类</h3><ul class="menu-list"><li> <a class="level is-marginless" href="/blog/categories/css动画/"><span class="level-start"><span class="level-item">css动画</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/github/"><span class="level-start"><span class="level-item">github</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/new-MARKDOWN/"><span class="level-start"><span class="level-item">new MARKDOWN</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/test/"><span class="level-start"><span class="level-item">test</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/前端/"><span class="level-start"><span class="level-item">前端</span></span> <span class="level-end"><span class="level-item tag">2</span></span></a><ul><li> <a class="level is-marginless" href="/blog/categories/前端/gulp/"><span class="level-start"><span class="level-item">gulp</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/blog/categories/前端/布局/"><span class="level-start"><span class="level-item">布局</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label"> 标签云</h3> <a href="/blog/tags/animation/" style="font-size:10px">animation</a> <a href="/blog/tags/bug/" style="font-size:10px">bug</a> <a href="/blog/tags/css/" style="font-size:20px">css</a> <a href="/blog/tags/dom/" style="font-size:10px">dom</a> <a href="/blog/tags/gulp/" style="font-size:10px">gulp</a> <a href="/blog/tags/hello-word/" style="font-size:10px">hello word</a> <a href="/blog/tags/html/" style="font-size:15px">html</a> <a href="/blog/tags/javascript/" style="font-size:15px">javascript</a> <a href="/blog/tags/js/" style="font-size:15px">js</a> <a href="/blog/tags/vim/" style="font-size:10px">vim</a> <a href="/blog/tags/vscode/" style="font-size:10px">vscode</a> <a href="/blog/tags/博客优化/" style="font-size:10px">博客优化</a></div></div><div class="column-right-shadow"><div class="card widget"><div class="card-content"><h3 class="menu-label"> 最新文章</h3><article class="media"><a href="/blog/articles/2019-07-16-webpack-tutorial-01.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/blog/images/thumbnail.svg" alt="webpack入门教程"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-16T13:24:36.000Z">2019-07-16</time></div> <a href="/blog/articles/2019-07-16-webpack-tutorial-01.html" class="has-link-black-ter is-size-6">webpack入门教程</a><p class="is-size-7 is-uppercase"></p></div></div></article><article class="media"><a href="/blog/articles/2019-07-14-CSS动画-auto属性的过渡.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/blog/articles/2019-07-14-CSS动画-auto属性的过渡/thumb.png" alt="CSS动画-auto属性的过渡"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-14T07:20:24.000Z">2019-07-14</time></div> <a href="/blog/articles/2019-07-14-CSS动画-auto属性的过渡.html" class="has-link-black-ter is-size-6">CSS动画-auto属性的过渡</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/blog/categories/css动画/">css动画</a></p></div></div></article><article class="media"><a href="/blog/articles/2019-07-05-hexo博客优化-gulp压缩-提高访问速度.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/blog/articles/2019-07-05-hexo博客优化-gulp压缩-提高访问速度/gulp.png" alt="使用gulp优化hexo博客，对资源进行压缩"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-05T11:00:00.000Z">2019-07-05</time></div> <a href="/blog/articles/2019-07-05-hexo博客优化-gulp压缩-提高访问速度.html" class="has-link-black-ter is-size-6">使用gulp优化hexo博客，对资源进行压缩</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/blog/categories/前端/">前端</a> / <a class="has-link-grey -link" href="/blog/categories/前端/gulp/">gulp</a></p></div></div></article><article class="media"><a href="/blog/articles/2019-07-05-VscodeVim-bug.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="https://user-images.githubusercontent.com/48582184/60663104-d951b280-9e90-11e9-97a7-fbe6c6f18849.png" alt="VscodeVim 遇到的奇葩bug"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-04T18:20:00.000Z">2019-07-05</time></div> <a href="/blog/articles/2019-07-05-VscodeVim-bug.html" class="has-link-black-ter is-size-6">VscodeVim 遇到的奇葩bug</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/blog/categories/github/">github</a></p></div></div></article><article class="media"><a href="/blog/articles/2019-07-03-html-css小技巧第一弹.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/blog/articles/2019-07-03-html-css小技巧第一弹/3d-layered.png" alt="Html+css+js布局设计第一弹"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-03T05:21:46.000Z">2019-07-03</time></div> <a href="/blog/articles/2019-07-03-html-css小技巧第一弹.html" class="has-link-black-ter is-size-6">Html+css+js布局设计第一弹</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/blog/categories/前端/">前端</a> / <a class="has-link-grey -link" href="/blog/categories/前端/布局/">布局</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 归档</h3><ul class="menu-list"><li> <a class="level is-marginless" href="/blog/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span> <span class="level-end"><span class="level-item tag">6</span></span></a></li><li> <a class="level is-marginless" href="/blog/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span> <span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"> <a class="tags has-addons" href="/blog/tags/animation/"><span class="tag">animation</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/bug/"><span class="tag">bug</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/css/"><span class="tag">css</span> <span class="tag is-grey">3</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/dom/"><span class="tag">dom</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/gulp/"><span class="tag">gulp</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/hello-word/"><span class="tag">hello word</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/html/"><span class="tag">html</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/javascript/"><span class="tag">javascript</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/js/"><span class="tag">js</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/vim/"><span class="tag">vim</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/vscode/"><span class="tag">vscode</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/blog/tags/博客优化/"><span class="tag">博客优化</span> <span class="tag is-grey">1</span></a></div></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"> <a class="footer-logo is-block has-mb-6" href="/blog/"><img src="/blog/images/logo.svg" alt="CSS动画-auto属性的过渡" height="28"></a><p class="is-size-7"> &copy; 2019 Chen Yinyi&nbsp; Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a></p></div><div class="level-end"><div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle"><p class="control"><a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script src="/blog/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer="defer"></script><script src="/blog/js/gallery.js" defer="defer"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})})</script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/blog/js/back-to-top.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer="defer"></script><script src="/blog/js/clipboard.js" defer="defer"></script><script src="/blog/js/main.js" defer="defer"></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/blog/content.json"}</script><script src="/blog/js/insight.js" defer="defer"></script><link rel="stylesheet" href="/blog/css/search.css"><link rel="stylesheet" href="/blog/css/insight.css"></body></html>